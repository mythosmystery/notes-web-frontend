(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{8887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes",function(){return n(4068)}])},5784:function(e,t,n){"use strict";var r=n(5893),i=n(7516);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){return(0,r.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({className:"flex text-orange text-center justify-center"},e,{children:[(0,r.jsx)(i.Cw1,{size:"20",className:"mr-1"}),e.children]}))}},8090:function(e,t,n){"use strict";n.d(t,{Pq:function(){return b},YA:function(){return p},_y:function(){return w},l4:function(){return N},wu:function(){return P},u2:function(){return O},iS:function(){return E}});var r=n(1230),i=n(2432);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function l(){var e=u(["\n    mutation deleteNote($id: String!) {\n  deleteNote(id: $id) {\n    message\n  }\n}\n    "]);return l=function(){return e},e}function c(){var e=u(["\n    mutation login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    id\n    email\n    firstName\n    lastName\n  }\n}\n    "]);return c=function(){return e},e}function s(){var e=u(["\n    mutation logout {\n  logout\n}\n    "]);return s=function(){return e},e}function d(){var e=u(["\n    mutation register($email: String!, $firstName: String!, $lastName: String!, $password: String!) {\n  register(\n    email: $email\n    firstName: $firstName\n    lastName: $lastName\n    password: $password\n  ) {\n    id\n    firstName\n    lastName\n    email\n  }\n}\n    "]);return d=function(){return e},e}function f(){var e=u(["\n    mutation updateNote($data: UpdateNoteInput!, $id: String!) {\n  updateNote(data: $data, id: $id) {\n    id\n    title\n    body\n    date\n  }\n}\n    "]);return f=function(){return e},e}function x(){var e=u(["\n    mutation writeNote($title: String!, $body: String!) {\n  writeNote(title: $title, body: $body) {\n    id\n    title\n    body\n  }\n}\n    "]);return x=function(){return e},e}function v(){var e=u(["\n    query getMe {\n  me {\n    id\n    firstName\n    lastName\n    email\n    notes {\n      id\n      title\n      body\n      date\n    }\n  }\n}\n    "]);return v=function(){return e},e}function h(){var e=u(["\n    query noteById($id: String!) {\n  getNote(id: $id) {\n    id\n    body\n    title\n    date\n  }\n}\n    "]);return h=function(){return e},e}var m=(0,r.ZP)(l());function b(){return i.Db(m)}var y=(0,r.ZP)(c());function p(){return i.Db(y)}var g=(0,r.ZP)(s());function w(){return i.Db(g)}var j=(0,r.ZP)(d());function N(){return i.Db(j)}var k=(0,r.ZP)(f());function P(){return i.Db(k)}var S=(0,r.ZP)(x());function O(){return i.Db(S)}var $=(0,r.ZP)(v());function E(e){var t=void 0===e?{}:e;return i.aM(a({query:$},t))}(0,r.ZP)(h())},4068:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(5666),i=n.n(r),o=n(5893),a=n(2175),u=n(7294),l=n(9583),c=n(8090);function s(e,t,n,r,i,o,a){try{var u=e[o](a),l=u.value}catch(c){return void n(c)}u.done?t(l):Promise.resolve(l).then(r,i)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(e){var t,n=e.noteId,r=e.refetch,a=e.reset,u=d((0,c.Pq)(),2)[1],f=(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({id:n});case 2:r(),a();case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)}))});return(0,o.jsx)("button",{onClick:f,type:"reset",className:"p-3 hover:text-orange text-foreground hover:bg-selection active:scale-125 active:shadow-lg",children:(0,o.jsx)(l.Xm5,{})})},x=n(9603);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}var m=Object.assign((function(e){return(0,o.jsx)("div",h({className:"flex flex-col h-screen flex-grow bg-white dark:bg-background min-w-0 mb-10 mx-4 lg:mx-12 border-l border-t dark:border-background-secondary shadow-lg"},e,{children:e.children}))}),{Textarea:function(e){return(0,o.jsx)("textarea",h({className:"flex bg-transparent border-transparent dark:text-foreground focus:border-transparent focus:ring-transparent w-full h-full resize-none px-6 py-4",placeholder:"Start writing your note..."},e))},Title:function(e){return(0,o.jsx)("input",h({type:"text",className:"flex flex-grow bg-transparent overflow-ellipsis text-center text-3xl border-none focus:ring-transparent dark:text-purple",placeholder:"Title"},e))},Save:function(e){return(0,o.jsx)(x.Z.Rounded,h({},e,{children:(0,o.jsx)(l.TvB,{size:"24"})}))},ListItem:function(e){return(0,o.jsx)("div",h({className:"flex flex-grow text-center dark:text-foreground bg-transparent hover:bg-selection cursor-pointer py-3 px-1 border-t dark:border-active w-full active:scale-110 active:shadow-md"},e,{children:e.children}))},SidePanel:function(e){return(0,o.jsxs)("div",h({className:"flex flex-col sm:w-1/4 bg-white dark:bg-background items-center border-t dark:border-foreground/20 shadow-md p-3"},e,{children:[(0,o.jsx)("h2",{className:"dark:text-foreground my-2 text-xl py-0.5",children:"Saved Notes"}),e.children]}))},New:function(e){return(0,o.jsx)(x.Z.Rounded,h({},e,{children:(0,o.jsx)(l.wEH,{size:"24"})}))}}),b=n(387),y=n(6893);function p(e,t,n,r,i,o,a){try{var u=e[o](a),l=u.value}catch(c){return void n(c)}u.done?t(l):Promise.resolve(l).then(r,i)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=function(){var e,t=(0,b.useRouter)(),n=g((0,c._y)(),2),r=n[0].fetching,a=n[1],u=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:t.push("/");case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,u,"next",e)}function u(e){p(o,r,i,a,u,"throw",e)}a(void 0)}))});return(0,o.jsx)("div",{className:"absolute top-0 right-0",children:(0,o.jsx)(x.Z.Rounded,{onClick:u,disabled:r,children:(0,o.jsx)(y.xqh,{size:"22"})})})},j=n(5784),N=n(9008),k=n(3399),P=function(e){var t=e.handleClose,n=e.callback,r=e.show,i=e.text;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"fixed bg-gray-600/40 backdrop-blur-sm min-h-screen w-screen justify-center items-center flex top-0 left-0 "+(r?"flex":"hidden"),children:(0,o.jsxs)("div",{className:"fixed flex flex-col h-1/2 w-1/2 dark:bg-background bg-disabled dark:text-foreground rounded-lg items-center justify-center overflow-hidden shadow-md",children:[(0,o.jsx)("div",{className:"p-1 my-2 mx-4 text-xl text-foreground text-center",children:i}),(0,o.jsxs)("div",{className:"flex flex-row h-full w-full",children:[(0,o.jsx)("button",{onClick:t,className:"p-5 flex-grow h-full dark:hover:bg-purple hover:bg-teal text-orange hover:text-background-secondary text-xl",children:"Cancel"}),(0,o.jsx)("button",{onClick:n,className:"p-5 flex-grow h-full dark:hover:bg-purple hover:bg-teal text-accent hover:text-background-secondary text-xl",children:"Confirm"})]})]})})})};function S(e,t,n,r,i,o,a){try{var u=e[o](a),l=u.value}catch(c){return void n(c)}u.done?t(l):Promise.resolve(l).then(r,i)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $={hidden:{x:500},enter:{x:0,y:0},exit:{x:-500}};function E(){var e,t,n=O((0,c.iS)({requestPolicy:"cache-and-network"}),2),r=n[0].data,l=n[1],s=O((0,c.u2)(),2)[1],d=O((0,c.wu)(),2)[1],x=(0,u.useState)(!1),v=x[0],h=x[1],b=(t=i().mark((function e(t,n){var r,o=n.setSubmitting,a=n.setValues;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=7;break}return e.next=3,s(t);case 3:(r=e.sent.data)&&a({id:r.writeNote.id,title:r.writeNote.title,body:r.writeNote.body}),e.next=9;break;case 7:return e.next=9,d({data:{body:t.body,title:t.title},id:t.id});case 9:o(!1);case 10:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){S(o,r,i,a,u,"next",e)}function u(e){S(o,r,i,a,u,"throw",e)}a(void 0)}))});return(0,o.jsxs)(k.E.main,{variants:$,initial:"hidden",animate:"enter",exit:"exit",children:[(0,o.jsxs)(N.default,{children:[(0,o.jsx)("title",{children:"My Notes"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("h1",{className:"dark:text-accent text-blue-400 capitalize text-center py-8 text-4xl",children:[null===r||void 0===r||null===(e=r.me)||void 0===e?void 0:e.firstName,"'s Notes"]}),(0,o.jsx)(w,{}),(0,o.jsx)(a.J9,{initialValues:{title:"",body:"",id:""},onSubmit:b,validate:function(e){var t={};return e.title?e.body||(t.body="Enter some text in the note"):t.title="Please enter a title for your note",t},children:function(e){var t,n=e.isSubmitting,i=e.setValues,u=e.resetForm,c=e.isValid,s=e.values;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P,{text:"Are you sure you want to lose this note?",show:v,handleClose:function(){return h(!1)},callback:function(){u(),h(!1)}}),(0,o.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row h-full",children:[(0,o.jsx)(m.SidePanel,{children:null===r||void 0===r||null===(t=r.me)||void 0===t?void 0:t.notes.map((function(e,t){return(0,o.jsxs)("div",{className:"flex w-full",children:[(0,o.jsx)(m.ListItem,{onClick:function(){i({id:e.id,title:e.title,body:e.body})},children:e.title},e.id),(0,o.jsx)(f,{noteId:e.id,refetch:l,reset:u},t)]},t)}))}),(0,o.jsx)(m,{children:(0,o.jsxs)(a.l0,{className:"flex flex-col h-full",children:[(0,o.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,o.jsx)(m.New,{type:"button",onClick:function(){return function(e,t){console.log("reset clicked"),!t.title&&!t.body||t.id?e():h(!0)}(u,s)}}),(0,o.jsx)("div",{className:"flex flex-grow justify-end",children:(0,o.jsx)(m.Save,{type:"submit",disabled:n||!c})})]}),(0,o.jsxs)("div",{className:"flex flex-col justify-center h-full",children:[(0,o.jsx)(a.Bc,{name:"title",component:j.Z}),(0,o.jsx)(a.Bc,{name:"body",component:j.Z}),(0,o.jsx)(a.gN,{as:m.Title,name:"title"}),(0,o.jsx)(a.gN,{as:m.Textarea,name:"body"})]})]})})]})]})}}),(0,o.jsx)("div",{className:"h-8 mt-2.5 text-center dark:text-foreground",children:"Hunter Barton, 2021"})]})}}},function(e){e.O(0,[874,338,893,774,888,179],(function(){return t=8887,e(e.s=t);var t}));var t=e.O();_N_E=t}]);